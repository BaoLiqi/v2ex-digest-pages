{
  "id": 1015122,
  "blocks": [
    {
      "chunks": [
        {
          "zh": "æ•°æ®åº“ç­‰æœåŠ¡ï¼Œåˆ°åº•è¦ä¸è¦å®¹å™¨åŒ–ï¼Ÿä½“éªŒä¸‹æ¥ï¼Œå„è‡ªçœŸæ­£çš„ä¼˜åŠ£æ˜¯ä»€ä¹ˆï¼Ÿ",
          "en": "Should database and other services be containerized? What are the real advantages and disadvantages of each based on experience?"
        }
      ],
      "type": "title"
    },
    {
      "chunks": [
        {
          "zh": "ä¸€ç›´æ¨¡ç³Šè®°å¾—ä¸æ¨èæ•°æ®åº“è¿™ç±»æœåŠ¡æ”¾åˆ°å®¹å™¨ä¸­ï¼Œä½†ç°åœ¨å¥½åƒå¾ˆå¤šåŸºäº K8s çš„æ•°æ®åº“äº§å“å’ŒæœåŠ¡ã€‚\r\n\r\nçº¿ä¸Šæ²¡æœ‰ç”¨è¿‡åŸºäº K8s éƒ¨ç½²çš„ mysql æœåŠ¡ï¼Œæ›´å¤šè¿˜æ˜¯ç”¨è‡ªæœ‰çš„æœºå™¨æ­å»º&å¤–åŠ ä¸€éƒ¨åˆ†è…¾è®¯äº‘ CDB ï¼Œé˜¿é‡Œäº‘ RDS ç­‰ã€‚\r\n\r\nå®¹å™¨åŒ–æ•°æ®åº“æœåŠ¡ï¼Œç©¶ç«Ÿè§£å†³äº†ä»€ä¹ˆç—›ç‚¹ï¼Ÿåˆå¸¦äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿç›®å‰å¤§å®¶æ¥è§¦åˆ°çš„æœåŠ¡éƒ½æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ",
          "en": "I vaguely remember that it's not recommended to put database services in containers, but now it seems that there are many database products and services based on K8s.\r\n\r\nI haven't used mysql services deployed based on K8s online; I mostly use my own machines for setup & plus some Tencent Cloud CDB, Alibaba Cloud RDS, etc.\r\n\r\nWhat pain points does containerized database service actually solve? What problems does it bring? What kind of services are people currently exposed to?"
        }
      ],
      "type": "content"
    },
    {
      "chunks": [
        {
          "zh": "",
          "en": ""
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "ä¸ªäººæ„Ÿè§‰æŠŠæ•°æ®åº“è¿™ç§é‡ IO é«˜ç¨³å®šæ€§éœ€æ±‚çš„æœåŠ¡å¡åˆ° K8s é‡Œé¢ä¸æ˜¯å•¥å¥½ä¸»æ„,`å¾ˆå¤šåŸºäº K8s çš„æ•°æ®åº“äº§å“å’ŒæœåŠ¡` å¾ˆå¯èƒ½åªæ˜¯å¯¹ç¨³å®šæ€§å’Œæ€§èƒ½æ²¡æœ‰é‚£ä¹ˆé«˜,å›¾æ–¹ä¾¿èˆå¼ƒç¨³å®šæ€§çš„äº§ç‰©. è¿™é‡Œå†¯è‹¥èˆªæœ‰ä¸€ç¯‡æ–‡ç« ,ä¹ŸæŒæœ‰ç›¸ä¼¼çš„è§‚ç‚¹. https://mp.weixin.qq.com/s/4a8Qy4O80xqsnytC4l9lRg æŒºæœ‰æ„æ€çš„æ˜¯,ä»–å‘å‡ºè¿™ç¯‡æ–‡ç« å,Sealos ä¹Ÿå‘äº†ç¯‡æŒç›¸åè§‚ç‚¹çš„æ–‡ç« æ¥\"è¿æˆ˜\":https://mp.weixin.qq.com/s/IDsF_f7ZnB19jEu8ZtO-Nw .ä½†æ˜¯é—æ†¾çš„æ˜¯,è¿™ç¯‡æ–‡ç« é€šç¯‡å……æ–¥ç€å¯¹è‡ªå®¶äº§å“çš„å¹å˜˜,è€Œå¯¹ä¸Šæ–‡æŠ›å‡ºçš„è§‚ç‚¹ç»™ä¸å‡ºå®è´¨æ€§çš„åé©³[like:\"K8s çš„ç¨³å®šæ€§é—®é¢˜?æˆ‘ä»¬ç”±ä¸“ä¸šçš„ xxx å›¢é˜Ÿæä¾›æ”¯æŒ,æˆ‘ä»¬çš„ç¨³å®šæ€§å·²ç»è¿œè¶…è®¸å¤šéä¸“ä¸šå›¢é˜Ÿçš„è¿ç»´æ°´å¹³(æ­¤å¤„æ²¡æœ‰ä»»ä½•æ•°æ®)\"].åæ­£çœ‹å®Œè¿™ç¯‡æ–‡ç« ,æˆ‘æ›´åšæŒå†¯è‹¥èˆªçš„è§‚ç‚¹äº†ğŸ¤£.",
          "en": "I personally feel that putting database services, which have high IO and stability requirements, into K8s is not a good idea. `Many database products and services based on K8s` may just not have very high stability and performance, and are products that sacrifice stability for convenience. Here is an article by Feng Ruohang that also holds a similar view. https://mp.weixin.qq.com/s/4a8Qy4O80xqsnytC4l9lRg It's interesting that after he published this article, Sealos also published an article with the opposite view to \"fight back\": https://mp.weixin.qq.com/s/IDsF_f7ZnB19jEu8ZtO-Nw. But unfortunately, this article is full of boasting about its own products and cannot provide any substantial rebuttal to the viewpoints raised in the previous article [like: \"K8s's stability issues? We are supported by a professional xxx team, and our stability has far surpassed the operation and maintenance level of many non-professional teams (no data here)\"]. Anyway, after reading this article, I am even more convinced of Feng Ruohang's point of view ğŸ¤£."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "æœ‰çŠ¶æ€æœåŠ¡é€‚ä¸é€‚åˆè¿› k8s ï¼Œå¾ˆé‡è¦ä¸€ä¸ªé€‰æ‹©å› ç´ æ˜¯ k8s ä¸Šçš„è¿œç¨‹å­˜å‚¨ã€‚äº‘ä¸Š ebs å…·æœ‰çš„å‡ ä¸ªç‰¹æ€§ï¼Œé«˜æ€§èƒ½ã€ä¸‰å‰¯æœ¬ã€io burst ã€attach ã€deattach ç­‰ã€‚è¿™äº›ç‰¹æ€§ï¼Œä¾èµ–ç¡¬ä»¶æŠ•å…¥ï¼Œå¦‚é«˜æ€§èƒ½ç½‘ç»œ RDMA ï¼Œåœ¨è‡ªå»º IDC æƒ…å†µä¸‹ä¸ä¸€å®šå…·å¤‡ã€‚æ‰€ä»¥ï¼Œè‡ªå»º IDC ä¸‹çš„ k8s å’Œäº‘ä¸Šæ˜¯æœ‰ä¸€äº›ä¸åŒçš„ï¼Œéš¾åº¦å’ŒæŒ‘æˆ˜ä¼šæ›´å¤§ã€‚äº‘ä¸Šï¼Œäº‘å‚å•†ä¾›åº”æœ‰çŠ¶æ€æœåŠ¡çš„äº‘å®ä¾‹ï¼ŒèƒŒåå·²ç»è½¬å‘ k8s åŒ–ï¼Œè¿™ä¸ªæ–¹å‘å·²ç»å‘ç”Ÿï¼Œäº‰è®®ä¸å¤§çš„ã€‚è‡ªå»º IDC åœºæ™¯ï¼Œæœ‰æ›´é«˜çš„éš¾åº¦ï¼Œä¸è¿‡ TiDB é’ˆå¯¹ IDC åœºæ™¯ä¹Ÿç»™å‡ºäº†è§£æ³• TiDB Operator ï¼Œä¾èµ–æœ¬åœ°ç£ç›˜ LPV ï¼Œè€Œéè¿œç¨‹å­˜å‚¨ã€‚LPV æœ‰æ˜“å¤±æ€§ï¼ŒTiKV å†…ç½®ä¸‰å‰¯æœ¬ç‰¹æ€§ï¼Œæ­£å¥½è¡¥å……è¿™å—çš„ä¸è¶³ã€‚ç±»ä¼¼çš„è¿˜æœ‰ Kafka çš„å¤šå‰¯æœ¬æœºåˆ¶ã€‚ä½†å¯¹äºå…¶å®ƒä¸å…·å¤‡ä¸‰å‰¯æœ¬çš„åŸºç¡€æœåŠ¡ï¼Œè¿› k8s æ²¡é‚£ä¹ˆå®¹æ˜“äº†ï¼Œå¿…é¡»é¢ä¸´ä¸¤éš¾é€‰æ‹©ï¼šæœ¬åœ°ç£ç›˜ éœ€è¦è‡ªå·±è§£å†³å¤šå‰¯æœ¬é—®é¢˜ï¼›è¿œç¨‹ç£ç›˜ æ€§èƒ½ä¸é«˜ï¼Œå°†æœ‰å¾ˆå¤§çš„æ€§èƒ½æŸè€—ã€‚é è¿œç¨‹å­˜å‚¨è‡ªèº«æ¥è§£å†³è¿™ä¸ªæ€§èƒ½é—®é¢˜ï¼Œçœ‹èµ·æ¥éå¸¸éš¾è·¨è¶Šã€‚",
          "en": "Whether a stateful service is suitable for k8s, an important selection factor is the remote storage on k8s. The cloud EBS has several characteristics, such as high performance, three replicas, IO burst, attach, detach, etc. These characteristics depend on hardware investment, such as high-performance network RDMA, which may not be available in a self-built IDC. Therefore, there are some differences between k8s under a self-built IDC and on the cloud, and the difficulty and challenge will be greater. On the cloud, cloud vendors provide cloud instances of stateful services, and the backend has turned to k8s, this direction has occurred, and there is not much controversy. Self-built IDC scenarios have higher difficulty, but TiDB also provides a solution for IDC scenarios TiDB Operator, which relies on local disk LPV, rather than remote storage. LPV is volatile, and TiKV has built-in three-replica features, which just make up for this shortcoming. Similar to this is Kafka's multi-replica mechanism. But for other basic services that do not have three replicas, it is not so easy to enter k8s, and they must face a dilemma: local disks need to solve the multi-replica problem by themselves; remote disks have low performance and will have a large performance loss. It seems very difficult to overcome this performance issue by relying on remote storage itself."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "æ²¡æœ‰å¿…è¦ï¼Œæœ¬æ¥åªéœ€è¦ç»´æŠ¤ä¸€ä¸ªæ•°æ®åº“ï¼Œç°åœ¨æœ‰åŠ äº†ä¸ªå®¹å™¨ï¼Œæ“ä½œç³»ç»Ÿã€ç½‘ç»œå­˜å‚¨éƒ½è¦éå¸¸äº†è§£ï¼Œè¦ä¸å´©äº† hold ä¸ä½",
          "en": "It's not necessary. Originally, you only needed to maintain a database, now you have added a container, and you need to know a lot about operating systems and network storage, or you won't be able to hold it if it crashes."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "1 æ¥¼çš„ä¸¤ç¯‡æ–‡ç« ä¹Ÿçœ‹è¿‡ï¼Œä¸‹é¢è¿™ä¸ªé“¾æ¥æ˜¯æˆ‘æœ€è¿‘çœ‹åˆ°çš„ï¼Œé‡Œé¢è‡³å°‘æœ‰å‡ ç§å®¹å™¨åŒ–æ–¹æ¡ˆå’Œå‹æµ‹çš„æ•°æ®ã€‚ä½†æˆ‘å¹¶ä¸æ“…é•¿è¿™æ–¹é¢ï¼Œåªèƒ½è´´å‡ºæ¥å’Œå¤§å®¶ä¸€èµ·åˆ†äº«ä¸‹ã€‚https://www.infoq.cn/article/Sh2TJYW1dKI4ZqpakUJJ?utm_campaign=geek_search&utm_content=geek_search&utm_medium=geek_search&utm_source=geek_search&utm_term=geek_search",
          "en": "I've also read the two articles on the first floor. The following link is what I saw recently, and it contains at least several containerization solutions and pressure test data. But I am not good at this aspect, I can only post it and share it with everyone. https://www.infoq.cn/article/Sh2TJYW1dKI4ZqpakUJJ?utm_campaign=geek_search&utm_content=geek_search&utm_medium=geek_search&utm_source=geek_search&utm_term=geek_search"
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "å®¹å™¨åŒ–çš„å¥½å¤„æ˜¯ç»´æŠ¤æ—¶æ–¹ä¾¿è¿…é€Ÿä½æˆæœ¬ç®¡ç†æœåŠ¡å®ä¾‹ï¼Œæ–°å¢åˆ é™¤èŠ‚ç‚¹ï¼Œè°æ•¢æ²¡äº‹å„¿éšä¾¿å¢åˆ æ•°æ®åº“èŠ‚ç‚¹ï¼Œ",
          "en": "The advantage of containerization is that it is convenient and quick to maintain and manage service instances at a low cost, adding and deleting nodes. Who dares to add and delete database nodes casually without anything to do?"
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "æ€§èƒ½æ˜¯ä¸€æ–¹é¢    ç¦»æ•£çš„æ•°æ®åº“ æ˜¯ä¸€ä¸ªç—›è‹¦",
          "en": "Performance is one aspect. A discrete database is a pain."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå¯ä»¥æ²¡äº‹æ‰©å®¹ç¼©å®¹ï¼Œä¹Ÿèƒ½è‡ªåŠ¨å®¹é”™å•¥çš„ï¼Œæ‰æ¯”è¾ƒé€‚åˆ k8s å§",
          "en": "Distributed databases, which can be scaled up and down without problems, and can also automatically fault-tolerant, are more suitable for k8s, right?"
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "å†å²ä¸Šå·¥ä¸šé©å‘½å‡ºç°çš„æ—¶å€™ä¸€äº›äººä¹Ÿæ˜¯è®¤ä¸ºé©¬è½¦è¿˜æ˜¯æ¯”è’¸æ±½æœºè½¦å¥½ï¼Œåæ¥å°±ä¸ç”¨è¯´äº†å§ã€‚ç°åœ¨éƒ½æœ‰æ•°æ®åº“å®¹å™¨åŒ–å¼¹æ€§ä¼¸ç¼©çš„äº‘æœåŠ¡å¹¶å¯¹å¤–æä¾›ï¼Œ å¹¶ä¸”è¿˜æ˜¯æ”¯æŒåˆ†åº“åˆ†è¡¨çš„ï¼Œè¯•ç”¨ä¸€ä¸‹ plantscale å§ï¼Œ åŸºäºäº‘åŸç”Ÿ vitess çš„ mysql å›½å†…åˆ›ä¸šå›¢ä½“åšçš„ kubeblocks ä¹Ÿå¯ä»¥çœ‹çœ‹",
          "en": "In history, when the industrial revolution appeared, some people also thought that horse-drawn carriages were still better than steam locomotives, and the rest is history. Now there are cloud services with containerized elastic scaling for databases and they are provided to the outside, and they also support sharding. Try plantscale, and you can also take a look at kubeblocks, which is made by a domestic startup team based on cloud-native vitess of mysql."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "ç‰©ç†æœºæˆ¿ä¸Šå°±æ²¡æ³•å®¹å™¨åŒ–ï¼Œå¥½ç‚¹çš„æ•°æ®åº“éƒ½éœ€è¦ç”¨ ROCE å…‰å£ç›´è¿å­˜å‚¨è®¾å¤‡",
          "en": "Containerization is not possible on physical machine rooms; good databases all need ROCE optical port direct connection storage devices."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "ä¸éœ€è¦,  å®¹å™¨ç•™ç»™æœ‰éœ€è¦çš„äººå§.",
          "en": "No need, leave the containers to those who need them."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "æˆ‘èµåŒ DB è¿™ç§**ä¼ ç»Ÿ**çŠ¶æ€åŒ–çš„åº”ç”¨æ— æ³•ç›´æ¥é€šè¿‡å®¹å™¨ç°æœ‰çš„æœåŠ¡æ–¹ä¾¿çš„è¿›è¡Œæ‰©å±•ï¼Œå¹¶ä¸”æˆ‘ä¹Ÿä¸è®¤ä¸ºæœªæ¥èƒ½å¤Ÿè§£å†³è¿™ä¸€ç‚¹ã€‚ä½†æ˜¯åœ¨è£¸æœºä¸Šæ‰©å®¹å°±å®¹æ˜“äº†å—ï¼Ÿå¦å¤–ä¸€æ–¹é¢ï¼Œæ–°å‹çš„åˆ†å¸ƒå¼å­˜å‚¨/æ•°æ®åº“ä¹Ÿè¶Šæ¥è¶Šå¤šã€‚æˆ‘è‡ªå·±ç›®å‰è¿˜æ˜¯æ›´å€¾å‘äºå°†æ•°æ®åº“æ”¾å…¥å®¹å™¨ä¸­ï¼Œæ›´å¤šçš„æ˜¯ä¸ºäº†ç®€åŒ–ç¯å¢ƒéƒ¨ç½²çš„è¦æ±‚ã€‚å¦‚æœä½ çš„äº§å“æœ‰éƒ¨ç½²å»ä¸åŒç¯å¢ƒçš„éœ€æ±‚ï¼ˆä¾‹å¦‚ to B/G éœ€è¦éƒ¨ç½²å»ç”¨æˆ·çš„è‡ªæœ‰æœºæˆ¿ï¼‰ï¼Œå®¹å™¨åŒ–ä¼šæå¤§åœ°é™ä½éƒ¨ç½²çš„æˆæœ¬ã€‚ä½†å¦‚æœæ˜¯ä½ è‡ªæœ‰+è£¸é‡‘å±çš„ç¯å¢ƒï¼Œå®¹å™¨åŒ–å¯èƒ½å¹¶ä¸ä¼šå¸¦æ¥å¾ˆå¤šæ”¶ç›Šã€‚",
          "en": "I agree that **traditional** stateful applications like DB cannot be easily expanded through existing container services, and I don't think this can be solved in the future. But is it easy to expand on bare metal? On the other hand, new distributed storage/databases are also increasing. I myself still prefer to put the database into containers, more to simplify the requirements of environment deployment. If your product has the need to deploy to different environments (for example, to B/G needs to be deployed to the user's own machine room), containerization will greatly reduce the deployment cost. But if it is your own + bare metal environment, containerization may not bring much benefit."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "äº¤ä»˜æ–¹é¢æ¥è¯´æ›´åŠ ç®€å•å’Œæ–¹ä¾¿ï¼Œåªæ˜¯ç»´æŠ¤èµ·æ¥ä¼šæ¯”è¾ƒå¿ƒç´¯ã€‚ã€‚",
          "en": "In terms of delivery, it is simpler and more convenient, but it will be more tiring to maintain."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "share nothing æ¶æ„ä¸é€‚åˆ k8s",
          "en": "Share-nothing architecture is not suitable for k8s"
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "çœ‹å¥½å®¹å™¨åŒ–",
          "en": "I am optimistic about containerization"
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "@mightybruce åœ¨ç”µåŠ¨æ±½è½¦é¢†åŸŸä¹Ÿæ€»æœ‰äººæ‹¿æ±½è½¦å–ä»£é©¬è½¦æ¥åšç±»æ¯”ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªç±»æ¯”ä¸åˆé€‚ã€‚ä»å„ä¸ªæ–¹é¢æ±½è½¦éƒ½æ˜¯å®Œå…¨ä¼˜äºé©¬è½¦çš„ï¼Œä½†æ˜¯ç›®å‰åœ¨æ•°æ®åº“ï¼Œå°¤å…¶æ˜¯éåˆ†å¸ƒå¼æ•°æ®åº“æ–¹é¢ï¼Œæ²¡æœ‰çœ‹åˆ°è¿™ç§ä¼˜åŠ¿ï¼Œå¦‚æœæœ‰è¿™ç§ä¼˜åŠ¿çš„è¯ï¼Œæ—©å°±å®Œå…¨é“ºå¼€äº†ã€‚",
          "en": "@mightybruce In the field of electric vehicles, people are always using the analogy of cars replacing horse-drawn carriages, and I think this analogy is inappropriate. Cars are completely superior to horse-drawn carriages in all aspects, but currently, in databases, especially non-distributed databases, there is no such advantage, if there is such an advantage, it would have been completely rolled out long ago."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "å»ºè®®ä¸è¦å®¹å™¨åŒ–",
          "en": "It is recommended not to containerize"
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "éƒ½æ˜¯ç›´æ¥ç”¨é˜¿é‡Œäº‘çš„æ•°æ®åº“æœåŠ¡ã€‚",
          "en": "I directly use Alibaba Cloud's database services."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "æ•°æ®åº“é€‚ä¸é€‚åˆå®¹å™¨åŒ–çœ‹äº‘å‚å•†å°±çŸ¥é“äº†ï¼Œäº‘å‚å•†çš„æ•°æ®åº“éƒ½æ˜¯æœ‰ä¸€å¥—è‡ªå·±çš„è¿ç»´æ–¹å¼ï¼Œè·Ÿ k8s æ²¡æœ‰åŠæ³•å…¼å®¹ç”Ÿäº§ä¸Šè‚¯å®šä¸é€‚åˆå®¹å™¨åŒ–ï¼Œä½†æ˜¯å¼€å‘æµ‹è¯•éƒ¨ç½²æ¯•ç«Ÿæ–¹ä¾¿",
          "en": "You can tell whether a database is suitable for containerization by looking at the cloud vendors. Cloud vendors' databases all have their own operation and maintenance methods, which are not compatible with k8s. It is definitely not suitable for containerization in production, but it is convenient for development, testing, and deployment."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "å®¹å™¨åŒ–çš„å‰ææ˜¯ï¼Œä½ ç©çš„è½¬~~~äººå®¶æä¾›å®¹å™¨åŒ–äº‘æœåŠ¡çš„å‚å•†å¯ä¸æ˜¯ç®€ç®€å•å• K8S èµ·ä¸ª Pod å°±å®Œäº†ã€‚é™¤éä½ å¯¹ç¨³å®šæ€§ã€æ€§èƒ½ã€è¿ç»´ä»€ä¹ˆçš„å…¨éƒ½æ²¡è¦æ±‚ï¼Œè·‘èµ·æ¥èƒ½ç”¨å°±è¡Œï¼Œé‚£è‡ªç„¶æ˜¯éšä¾¿",
          "en": "The premise of containerization is that you know how to play ~~~ the manufacturers that provide containerized cloud services are not just starting a Pod with K8S. Unless you have no requirements for stability, performance, operation and maintenance, and it works when it runs, then it's up to you."
        }
      ],
      "type": "replies"
    }
  ]
}