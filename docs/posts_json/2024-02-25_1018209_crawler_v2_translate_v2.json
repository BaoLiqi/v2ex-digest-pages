{
  "id": 1018209,
  "blocks": [
    {
      "chunks": [
        {
          "zh": "很痛苦，火狐对扩展程序的限制让我开始自我怀疑了",
          "en": "It's painful. Firefox's restrictions on extensions are making me doubt myself."
        }
      ],
      "type": "title"
    },
    {
      "chunks": [
        {
          "zh": "开发的扩展程序准备适配火狐时发现火狐在 mv3 版本里，禁用了 script-src 的外部资源只允许使用 self ，而且还禁止了 blob 。  \r\n我的扩展程序的用户认证用的是 clerk 这个服务，这个服务里的代码有很多都是远程 js 和 blob 。",
          "en": "When preparing to adapt the developed extension to Firefox, I discovered that Firefox in mv3 version disables external resources of script-src and only allows self, and also prohibits blob. My extension's user authentication uses the clerk service, and a lot of the code in this service is remote js and blob."
        },
        {
          "zh": "我费劲改了 clerk 的代码把远程 js 改成本地，结果发现还有 blob 的问题，就不知道怎么办了。",
          "en": "I painstakingly modified the clerk code to change the remote js to local, but then I found that there were still blob problems, and I didn't know what to do."
        },
        {
          "zh": "\r\n没有看到任何社区询问这个问题，现在我开始怀疑是不是我写扩展的思路不对。。。扩展程序的登录是不是不是这么搞，也没有相关的教程和案例可以看。。。",
          "en": "I haven't seen any community asking about this issue, and now I'm starting to wonder if my approach to writing extensions is wrong... Is this not how extension logins are done? And there are no related tutorials or examples to look at."
        },
        {
          "zh": "\r\n找不到相关知识就很难受。",
          "en": "It's really uncomfortable not being able to find relevant knowledge."
        },
        {
          "zh": "\r\n痛，非常之痛。。。",
          "en": "Pain, so much pain..."
        }
      ],
      "type": "content"
    },
    {
      "chunks": [
        {
          "zh": "@NewYear #20 所以你只是在输出情绪，根本没辩证地思考，只想把这个问题归咎为政府及其政策问题，和 op 主题没任何关系",
          "en": "@NewYear #20 So you're just venting emotions, not thinking dialectically at all. You just want to attribute this problem to the government and its policies, which has nothing to do with the OP's topic."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "安全就是这样的，为了安全，需要牺牲很多便利。自古的经验来看，便利可以让你一时爽，但安全问题可能让你送命。最近南京小区失火新闻可以搜一下，居民们为了方便，违规停电动车，最后死了那么多人。",
          "en": "That's how security is. For security, you need to sacrifice a lot of convenience. From ancient experience, convenience can make you happy for a while, but security problems can kill you. You can search for the recent news about the fire in a residential area in Nanjing. Residents illegally parked electric vehicles for convenience, and in the end, so many people died."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "对了，楼上的我看似有点跑题，但是我想说“居民们为了方便，违规停电动车，最后死了那么多人。”这个因果关系是不成立的，实际是“制定规则的部门”为了规范而规范，没有考虑居民实际使用需求，也没有帮助居民解决问题，居民自己也不可能去室外设立充电桩（在我们农村反而没问题，自家掏钱搞一个就是了），导致居民“普遍性违法”，然后才是“死了那么多人”。      很有意思的是，在这个事件中，规则制定人、电动车生产方等等都是无责任的，责任全是消费者的问题，主打的就是一个花钱买罪受，为了方便倾家荡产。",
          "en": "By the way, the above may seem a bit off-topic, but I want to say that the causal relationship of 'residents illegally parked electric vehicles for convenience, and in the end, so many people died' is not valid. In fact, it is the 'departments that make rules' that regulate for the sake of regulation, without considering the actual needs of residents or helping residents solve problems. Residents themselves cannot set up charging stations outdoors (which is not a problem in our rural areas; you can pay for one yourself). This leads to 'widespread violation' by residents, and then 'so many people died.' It's very interesting that in this incident, the rule-makers, electric vehicle manufacturers, etc., are all without responsibility. The responsibility is entirely the consumer's problem, mainly about spending money to suffer, and going bankrupt for convenience."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "@NewYear 是的，我的第一反应也是这个。我不在国内，但我都有了一提到电瓶车充电就会着火的印象，看到很多人一看见有人把电瓶车带上楼或者怎么样就去阻止。是电瓶车一充电就 100%爆炸还是容易爆炸还是只在居民楼容易爆炸？那这要么是电瓶的问题要么是供电系统的问题。店里买来的东西在自家充电不是正常吗？似乎大家都习惯了谴责电瓶车主。这就像人人都默认房子装修好了要晾甲醛，为啥新房子就必须有甲醛呢？",
          "en": "@NewYear Yes, that was my first reaction too. I'm not in China, but I've got the impression that charging electric bikes will cause fires, and I see a lot of people stop others from taking electric bikes upstairs or something. Is it that electric bikes explode 100% when charged, or are they prone to explosion, or do they only explode easily in residential buildings? If so, it's either the battery problem or the power supply system problem. Isn't it normal to charge things bought from the store at home? It seems like everyone is used to blaming the electric bike owner. It's like everyone defaults that a house must be aired for formaldehyde after renovation. Why must a new house have formaldehyde?"
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "@laminux29      一直认为针对“电动车、摩托车”的许多限制是不太合理的，禁摩、禁电动车入户等等，都是一纸条文下去就什么都不管了，出了问题就是居民不道德，居民伤天害理。    摩托车有风险，禁，没法出行是吧，电动车不安全是吧，买轿车啊，没地方放车是吧，买个房啊，主打的就是大家都是富裕家庭。对了，买车放家里就可以了，千万别开出门，外面哪有那么多车位。      反正我自己是买了车，但是出行一般是共享单车……所以明明摩托车/电动车可以解决问题，最后各种买买买，巨大支出，年年保险费，实际用的反而是自行车……     我这边前几个月突然被上门检查，说是查不准用煤气罐热水器，我满脸懵逼，这个也不让用吗，还专门查了很久，找不到同等体验的替补（要么使用不方便，要么安装贼复杂），真的很不喜欢这样子一刀切的玩法。     所以这个电动车入户充电的问题，还是建议搞一些方便居民充电的设施，我这边居民从来不入户充电，很简单啊，因为门口和公司停车处都有电动车充电桩，方便得很，价格也很便宜。     哦对了，也可以像我们这边禁摩一样，直接禁止电动车出行就行了，也能解决问题。",
          "en": "@laminux29 I've always thought that many restrictions on 'electric vehicles, motorcycles' are unreasonable. Banning motorcycles, banning electric vehicles from entering homes, etc., is just a piece of paper and then nothing is done. When problems arise, it's because the residents are immoral and outrageous. \nMotorcycles are risky, banned. Can't travel, right? Electric vehicles are unsafe, right? Buy a car. No place to park, right? Buy a house. The main point is that everyone is a wealthy family. By the way, you can buy a car and leave it at home, but don't drive it out. There aren't that many parking spaces outside. Anyway, I bought a car, but I usually travel by shared bicycle... So, motorcycles/electric vehicles can solve the problem, but in the end, I buy everything, huge expenses, annual insurance premiums, and actually use a bicycle... A few months ago, I was suddenly inspected at home, saying that I wasn't allowed to use gas cylinder water heaters. I was dumbfounded. Isn't this allowed either? I searched for a long time and couldn't find a substitute with the same experience (either it's inconvenient to use, or the installation is very complicated). I really don't like this one-size-fits-all approach. So, regarding the electric vehicle charging problem, I still suggest building some facilities that are convenient for residents to charge. Residents here never charge at home. It's very simple because there are electric vehicle charging stations at the door and in the company parking lot, which are very convenient and cheap. Oh, by the way, you can also ban electric vehicle travel directly, just like we ban motorcycles here. That can also solve the problem."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "请务必救救忠实的火狐用户。",
          "en": "Please save the loyal Firefox users."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "@NewYear 你觉得官方出台限制电动车、摩托车不合理，那请问，很多地方都出台了摩托车要考驾照、买保险，有几个人执行？电动车放楼道里有风险，有几个人规规矩矩地把电动车放到了规定地点？不要总站在一个角度思考问题，请多换位思考。",
          "en": "@NewYear You think it's unreasonable for the authorities to issue restrictions on electric vehicles and motorcycles, but let me ask you, many places have issued requirements for motorcycles to have a driver's license and insurance. How many people follow them? Electric vehicles are risky when placed in corridors. How many people obediently put electric vehicles in the designated location? Don't always think from one perspective. Please think from other people's perspective."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "火狐上架和审核比 Chrome 严格很多曾经在火狐上架过插件插件会请求一个 url 获取数据，更换插件 Options 页面的 Banner 信息 （如果出现啥问题，Banner 才会显示）第一次上架：工程源码上传 审核 通过 上架  没问题过了几个月 有火狐插件审核员对插件有质疑，会收到类似邮件：真的是人工审核，要给项目工程源码，还要回答审核员的问题他们真的懂代码，还可以帮你优化代码 😎Please address the issues raised in the reviewer's notes and inquire about any unclear items. Afterwards, please upload a new version of your add-on at https://addons.mozilla.org/en-US/developers/addon/fastgithub/versions.To respond, please reply to this email or visit https://addons.mozilla.org/en-US/developers/addon/fastgithub/versions. If we do not hear from you within 14 day(s) of this notification, these versions will be removed from addons.mozilla.org. Current users of these versions will be unaffected.Thank you for your attention.审核员主要质疑的地方：1. 你的 URL 是否安全，是否会发送有害信息2. 你的服务器是否安全，是否会被 xxx ，通过 URL 给用户发送 xxx 信息，让用户点击请提供服务器安全监测相关证明和以及你如何保障 URL 的安全",
          "en": "Firefox's submission and review are much stricter than Chrome's. I once submitted a plugin on Firefox. The plugin will request a URL to get data and replace the Banner information on the plugin's Options page (the Banner will only be displayed if there is a problem). First submission: Project source code uploaded, reviewed, passed, and submitted. No problem. After a few months, a Firefox plugin reviewer questioned the plugin and received a similar email: It is really manually reviewed. You need to give the project source code and answer the reviewer's questions. They really understand the code and can help you optimize the code 😎Please address the issues raised in the reviewer's notes and inquire about any unclear items. Afterwards, please upload a new version of your add-on at https://addons.mozilla.org/en-US/developers/addon/fastgithub/versions.To respond, please reply to this email or visit https://addons.mozilla.org/en-US/developers/addon/fastgithub/versions. If we do not hear from you within 14 day(s) of this notification, these versions will be removed from addons.mozilla.org. Current users of these versions will be unaffected.Thank you for your attention. The main issues questioned by the reviewer: 1. Is your URL safe? Will it send harmful information? 2. Is your server safe? Will it be xxx, send xxx information to users through the URL, and ask users to click? Please provide relevant proof of server security monitoring and how you ensure the security of the URL."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "关了电脑，躺在床上，我突然想到一个问题，他是不是只限制的前端代码，background 里是不是没限制？如果是的话我就把请求都转移到后台的脚本里，然后麻烦一点 message 通信一下。明天看看吧",
          "en": "After turning off the computer and lying in bed, I suddenly thought of a problem. Is it only restricting the front-end code? Is there no restrictions in the background? If so, I will transfer all the requests to the background script, and then use message communication, which will be a little more troublesome. I'll take a look tomorrow."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "chrome 的 Manifest v3 好像也这样吧？ 不太清楚 问问",
          "en": "Doesn't Chrome's Manifest v3 seem to be like this too? Not sure. Asking."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "MV3 好像就是所有代码都必须在插件包",
          "en": "It seems like MV3 requires all code to be in the plugin package."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "还-+++",
          "en": "Still-+++ "
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "@yfugibr  #4 误触了抱歉",
          "en": "@yfugibr #4 Sorry for the misclick"
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "建议你专门打开一个标签页让用户登录吧，登完把凭据传到你插件里",
          "en": "I suggest you open a separate tab for users to log in. After logging in, transfer the credentials to your plugin."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "你直接获取你网站的 cookie 就好了，这样插件里不需要登录。",
          "en": "You can directly get the cookies from your website, so you don't need to log in within the plugin."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "确实，但肯定有解决方法而且会比你想象的简单",
          "en": "Indeed, but there is definitely a solution and it will be simpler than you think."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "background scripts 没有限制外部请求，可以从 content scripts 发消息到 background 这样来发起请求。可以参考我写的扩展： https://github.com/kidlj/metword.extension",
          "en": "Background scripts have no restrictions on external requests. You can send messages from content scripts to the background to initiate requests. You can refer to the extension I wrote: https://github.com/kidlj/metword.extension"
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "@DiamondYuan #8 这事我也在想，但是我不知道插件怎么获取网站的 cookie",
          "en": "@DiamondYuan #8 I was also thinking about this, but I don't know how the plugin gets the website's cookie."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "@kidlj #10 非常感谢，我看一下",
          "en": "@kidlj #10 Thank you very much, I'll take a look."
        }
      ],
      "type": "replies"
    },
    {
      "chunks": [
        {
          "zh": "@rizon #11 const result = await browser.cookies.get({  url: \"站点 URL\",  name: \"站点 cookie 名称\",})需要 cookies 权限",
          "en": "@rizon #11 const result = await browser.cookies.get({ url: \"Site URL\", name: \"Site cookie name\",}) requires cookies permission"
        }
      ],
      "type": "replies"
    }
  ]
}